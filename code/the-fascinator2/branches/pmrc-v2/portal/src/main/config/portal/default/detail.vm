#************************
* Zero hits
************************#
#if($self.solrResponse.get("response/numFound") == 0)
  <h2 id="page-heading">Page not found</h2>
  <p>Please try a different <a href="$portalPath/search">search</a>.</p>

#************************
* Normal page render
************************#
#else
  #parse($page.getTemplate('detail-screen/variables.vm'))
  #parse($page.getTemplate('detail-screen/scripts.vm'))

## PMRC does not use navigation.vm as it consists of table for the detail page
#set($pageHeader="#parse($page.getTemplate('detail-screen/header.vm'))")

<table class="layout" width="10px">
  <tbody>
    <tr>
      <td class="leftcol">
        <div class="columnbox">
          <div class="mainmenu">
            <div class="mainmenu-top"></div>
            <div class="mainmenu-heading">Public Memory Research Centre</div>
            <ul class="menu-list">
              <li><a href="$portalPath/home">Home</a></li>
              <li><a href="$portalPath/browse">Browse</a></li>
              <li><a href="$portalPath/search">Search</a></li>
            </ul>
          </div>
          #if($page.authentication.is_logged_in())
              #if($page.authentication.is_admin())
                  <div class="mainmenu">
                    <div class="mainmenu-top"></div>
                    <div class="mainmenu-heading">Actions</div>
                    <ul class="menu-list">
                        <li><a class="admin-delete-link" rel="$oid" href="#">Delete...</a></li>
                        <li><a id="reharvest" href="$portalPath/detail/$oid">Re-Harvest...</a></li>
                    </ul>
                  </div>
              #end
              <div class="mainmenu">
                <div class="mainmenu-top"></div>
                <div class="mainmenu-heading">Downloads</div>
                <ul class="menu-list">
                  <li><a href="$portalPath/download/$oid/$self.getFileName($sourceId)">$self.getFileName($sourceId)</a> <span style="font-weight:normal">($self.getFileSize($sourceId))</span></li>
                </ul>
              </div>
          #end
        </div>
      </td>
      
      <td class="middlecol">
        <div class="detail">
        #if($page.authentication.is_logged_in())
            #if($self.solrResponse.get("response/numFound") == 0)
              #set($pageTitle = "Not found")
              #set($breadcrumb = "Not found")
              <h1 class="content-title">Page not found</h1>
              <h2>There is no media matching your request.</h2>
              <p>You have been redirected to this page because one of the following occurred:</p>
              <ul type="disc">
                <li>It is possible the URL was misspelled or typed incorrectly.</li>
                <li>You have requested an item that no longer exists.</li>
              </ul>
              <p>Return to the <a href="$portalPath/home">Public Memory Research Centre</a>.</p>
            #else
              #set($breadcrumb = '<a href="' + $portalPath  + '/search">Search</a> &gt; ' + $title)
              <h1 class="content-title">$title</h1>
              <div id="preview" class="box articles">
                <h2>Preview</h2>
                <div id="object-tag-list">
                  <p rel="$page.md5Hash($oid)_object">Tags: <span class="object-tags"></span></p>
                </div>
                <div id="location-tag-list">
                  <p rel="$page.md5Hash($oid)_location">Location: <span class="location-tags"></span></p>
                </div>
                <div id="people-tag-list">
                  <p rel="$page.md5Hash($oid)_people">People: <span class="people-tags"></span></p>
                </div>
                <div id="anno-root" class="content-preview">
                  <span class="mimetype" rel="$self.mimeType"></span>
                  <div class="first article clearfix">
                     <div id="content">
                    #if($self.mimeType.startsWith("audio/") || $self.mimeType.startsWith("video/"))
                        <!-- <input class='player_clear_fragment' type='button' value='Reset' /> -->
                        <table>
                          <tbody>
                            <tr>
                              <td id="player-container"></td>
                              <td align="left">
                                <div id="video-results-list" class="video-results-list">
                                  <div id="video-result-list" class="video-result-list" anotar-uri="$oid"><span></span>
                                  </div>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                    #else
                        ##<h3 class="title-heading">$title</h3>
                        <div class="content-preview-inline">$!self.payloadContent</div>
                        <script type="text/javascript" src="$portalPath/js/tree/jquery.tree.min.js"></script>
                        <script type="text/javascript" src="$portalPath/js/viewer.js"></script>
                        <div class="annotatable">&nbsp;</div>
                    #end
                   </div>
                </div>
              </div>
            #end
        #else
              <div class="login-error">You do not have permission to view this page. Please login to proceed<!--<a id="login-now" href="#">Login</a>-->.</div>
        #end
        </div>
      </td>
    </tr>
  </tbody>
</table>

<div class="clear"><!-- clear --></div>

  #if(!$isPackage)
    #************************
    * Annotations - JS
    ************************#
    #parse($page.getTemplate('detail-screen/anotar/form-tags.html'))
    #parse($page.getTemplate('detail-screen/anotar/form-geonames.html'))
    #parse($page.getTemplate('detail-screen/anotar/form-media.html'))
    #parse($page.getTemplate('detail-screen/anotar/form-people.html'))
    #parse($page.getTemplate('detail-screen/anotar/dialog-delete.html'))

    #parse($page.getTemplate('detail-screen/anotar/js-tags.js'))
    #parse($page.getTemplate('detail-screen/anotar/js-geonames.js'))
    #parse($page.getTemplate('detail-screen/anotar/js-people.js'))
    #parse($page.getTemplate('detail-screen/anotar/js-media.js'))
    #parse($page.getTemplate('detail-screen/anotar/js-comments.js'))
    #parse($page.getTemplate('detail-screen/anotar/js-images.js'))

  #else
    #************************
    * Packaging - JS
    ************************#
    #parse($page.getTemplate('detail-screen/js/rvt.js'))
  #end

#end

#set ($_=$self.closeObject())